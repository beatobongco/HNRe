(this["webpackJsonphn-reader"]=this["webpackJsonphn-reader"]||[]).push([[0],[,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,o,i=n(1),a=n.n(i),r=n(4),s=n.n(r),l=(n(9),n(2)),u=(n(10),n(11),new Map),h=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){if(u.has(e.target.id))u.get(e.target.id)();h.unobserve(e.target)}}))}),{root:null,rootMargin:"0px 0px 0px 0px",threshold:0}),f="HNRe",d="".concat(f,"-stories"),j=function(e,t){t&&window.localStorage.setItem(e,JSON.stringify(t))},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=window.localStorage.getItem(e);return n?JSON.parse(n):t},b=function(e){if(!e.ok)throw Error(e.statusText);return e.json()},v=n(0),A=function(e){var t=e.apiURL,n=e.storyId,c=e.isOnline,o=e.isLastItem,a=e.updateMaxStory,r=Object(i.useState)(),s=Object(l.a)(r,2),d=s[0],A=s[1],g=Object(i.useRef)(null),m=Object(i.useState)(!1),N=Object(l.a)(m,2),p=N[0],w=N[1],x=Object(i.useState)(!1),E=Object(l.a)(x,2),L=E[0],S=E[1],I=Object(i.useCallback)((function(){var e=O("".concat(f,"-").concat(n));e&&(A(e),o&&a())}),[n,o,a]);if(Object(i.useEffect)((function(){var e,t,c;g&&g.current&&(e=g.current,t=n.toString(),c=function(){w(!0)},h.observe(e),u.set(t,c))}),[g,n]),Object(i.useEffect)((function(){var e=!0;return p&&!L&&(c?fetch("".concat(t,"/item/").concat(n,".json")).then(b).then((function(t){j("".concat(f,"-").concat(n),t),e&&(A(t),S(!0),o&&a())})).catch((function(e){I()})):I()),function(){e=!1}}),[t,n,p,L,c,I,o,a]),p&&d){var y=d.title,U=d.time,k=d.score,C=d.by,F=d.descendants,B=d.url,M=d.url?"(".concat(B.split("/").slice(1,3)[1],")"):null,P="";U&&(P=function(e){var t=new Date(1e3*e);return"".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getHours(),":").concat(("0"+t.getMinutes()).substr(-2))}(U));var R="https://news.ycombinator.com/item?id=".concat(n);return B||(B=R),Object(v.jsxs)("article",{ref:g,className:"story-card",children:[Object(v.jsx)("header",{children:Object(v.jsx)("h1",{className:"story-link-wrapper",children:Object(v.jsxs)("a",{className:"story-link",href:B,children:[Object(v.jsx)("span",{className:"title",children:y}),M?Object(v.jsxs)("small",{className:"domain",children:["\xa0",M]}):null]})})}),Object(v.jsxs)("small",{className:"story-info",children:[Object(v.jsxs)("span",{children:[k," points | "]}),Object(v.jsxs)("a",{className:"comment-url",href:R,children:[F,Object(v.jsx)("img",{className:"comment-img",width:"18",height:"18",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABCgAAAQoBFqS8ywAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAOBSURBVHic7ZtPbAxRHMc/v5nZrv9/QhQNqbZI0JKog/jbNk7i6KbhJm5cXCUO7iQivSCRCEHi4CQhTeNAotg2VP+FVJH4E5Jire7Mc6jRLVs62zfzup39nN7OzHvv+777+8383mZWlFLEGcu0ANOUDDAtwDTOP8/21lUhqh6hHk9qEM2GucqiP71F65gAIh4OA9j2PZLuDbb13h/30rw3wa51y0jYLSD7tIvLxQNSQ6FOAcAce4C5iT1s7+r589Tf32hf3X4SztPQFx8lX9yVvM900br2xJ+nxkZA/8YNKNUOlEUiLKoI8LGAhYldNPa05R4aobXBQakLRLV4E3hA2rsJ8nvdowZUfGwG6g3IipZv7kJa15zyP44aILLNiCAT/PCa/GbOTVBN/2/fZ9ir8ZsjBrQ2OMB6U3oiJ6Pm+80RAypfOvyvKJpOeEr8ZuxL4dgboC/sZ24msJ9K+L5yaeCpxM2QfH09cL986DNgeQtIsBpKKcU773XgqWxLqNBkQOxTIPYG6EuBN4cJ6qcoYcnbwu4ButBnQLo9eB8PZgxEuBvMQ+xTIPYGaH4MJgJ1UQjvZi0IPJWtMiy+vzdwv3zoLYQC1gEoRaagOmBG4D7jUUoBbSOl2wOnAAhJq7AU0IXmOiAY4kF5lD+K5iH2KRB7A0rbYS2jQGk7XKzE3oDSdljbSKXtcHFSMgCAypc/gK9mpUSILZ7f/BUBykN4ZEpP5CSt935zNAUUD42IMUFCuvxm7vsBt4yIMUHSvuQ3Rw2oTt1FuGhCT6TMszvY+fy8/3HsU8C2jwFvotYUGWXWMEm7KffQWAMqH3/Gle1AG9ONWfYHFpVtZXf3h9zD+V+URIS+2qPAMWBFaKKieE2uzMoy17lCY3dzvtPjGJDDi9pystQj0gJUTELKMMgZYPD3EU9ZvErvmMSY4yBZLHlMNnuNPf29/7xywv8X6Kt7AmwsUNEzkGZqUlOu1gi7FFaIOo0ztHkqLh7CfTFqEEsOUdVxJ8Q5Jk1YEXAZx66lKjWlFw/6I+AToo5Q3XlV87ihoTMCbuM6G4pp8aAnAtIIx6nuPAvF9xe0yRrwEFcOsDbVrUWNAQpNARc4yeCircW8eCgoAlQvympmdeoBNf+/eqoTIAJEgTrH7OQmVqcehCcpWiYeAbZ3kFWdHSFqMcLE9wLTlNLP4qYFmCb2BvwEpmr9SbGG6dQAAAAASUVORK5CYII=",alt:"view comments"})]})," ",Object(v.jsxs)("span",{children:["by"," ",Object(v.jsx)("a",{className:"author",href:"https://news.ycombinator.com/user?id=".concat(C),children:C})]})," ",Object(v.jsxs)("span",{children:["on ",P]})]})]})}return Object(v.jsx)("div",{id:n.toString(),ref:g,className:"space-taker"})};n(13);!function(e){e.ONLINE="Connected to HN",e.OFFLINE="Offline, using cache"}(c||(c={})),function(e){e.ONLINE="fadeInRight",e.OFFLINE="fadeOutRight"}(o||(o={}));var g,m=function(e){var t=e.isOnline,n=Object(i.useState)(!0),a=Object(l.a)(n,2),r=a[0],s=a[1];return Object(i.useEffect)((function(){s(!0);var e=setTimeout((function(){s(!1)}),2500);return function(){return clearTimeout(e)}}),[t]),Object(v.jsx)("div",{className:"connection-notifier ".concat(r?o.ONLINE:o.OFFLINE),children:t?c.ONLINE:c.OFFLINE})};!function(e){e.TOP="topstories",e.NEW="newstories"}(g||(g={}));var N=function(e){var t=e.apiURL,n=Object(i.useState)(!0),c=Object(l.a)(n,2),o=c[0],a=c[1],r=Object(i.useState)([]),s=Object(l.a)(r,2),u=s[0],h=s[1],f=Object(i.useState)(20),N=Object(l.a)(f,2),p=N[0],w=N[1],x=Object(i.useState)(g.NEW),E=Object(l.a)(x,2),L=E[0],S=E[1],I=Object(i.useCallback)((function(){w(p+20)}),[p]);return Object(i.useEffect)((function(){var e=!0;window.addEventListener("offline",(function(){console.log("HNRe is offline."),a(!1)})),window.addEventListener("online",(function(){console.log("HNRe is online."),a(!0)}));var n="".concat(d,"-").concat(L);return fetch("".concat(t,"/").concat(L,".json")).then(b).then((function(t){j(n,t),e&&h(t)})).catch((function(t){console.log("Fetching data from cache...");var c=O(n);c&&e&&h(c)})),function(){e=!1}}),[t,L]),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)("header",{children:[Object(v.jsxs)("h1",{children:[Object(v.jsx)("span",{className:"hn-title",children:"HN"}),"Re"," "]}),Object(v.jsx)("div",{className:"tagline",children:"Hacker News Reader"})]}),Object(v.jsxs)("nav",{children:[Object(v.jsx)("a",{href:"#",className:L===g.TOP?"selected":"",onClick:function(){return S(g.TOP)},children:"Top"}),"  ","|","  ",Object(v.jsx)("a",{href:"#",className:L===g.NEW?"selected":"",onClick:function(){return S(g.NEW)},children:"New"})]}),Object(v.jsx)("section",{className:"stories-container",children:u?u.slice(0,p).map((function(e,n){return Object(v.jsx)(A,{apiURL:t,storyId:e,isOnline:o,isLastItem:n+1===p,updateMaxStory:I},e)})):null}),u.length>0&&p>=u.length?Object(v.jsx)("div",{className:"the-end fadeIn",children:Object(v.jsx)("a",{href:"https://www.youtube.com/watch?v=36reZ9-3VK0",children:Object(v.jsx)("small",{children:"~~~~ You've reached the end ~~~~"})})}):null,Object(v.jsx)(m,{isOnline:o})]})},p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),i(e),a(e)}))};s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(N,{apiURL:"https://hacker-news.firebaseio.com/v0"})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");p?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):w(t,e)}))}}(),x()}],[[14,1,2]]]);
//# sourceMappingURL=main.1ccd925b.chunk.js.map